<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Projects - NerdzFactory Company</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="icon" type="image/png" href="images/cropped-NF-LOGO-NEW-1024x1024-removebg-preview-1.png">
</head>

<body>
  <!-- Include your existing navbar and topbar here -->
  <div class="topbar" role="banner">
    <div class="left">
      <div class="contact">
        <a href="tel:+2349164638956" aria-label="Call us">
          <i class="fas fa-phone-alt" aria-hidden="true"></i>
          <span>+234 916 463 8956</span>
        </a>
        <a href="mailto:info@nerdzfactory.co" aria-label="Email us">
          <i class="fas fa-envelope" aria-hidden="true"></i>
          <span>info@nerdzfactory.co</span>
        </a>
      </div>
      <div class="address">
        <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
        Head office: 2, Insha Allah close, Off Ramat Crescent, Ogudu GRA, Ojota, Lagos.
      </div>
    </div>
    <div class="whatsapp">
      <a href="https://wa.me/2349164638956" target="_blank" rel="noopener" aria-label="Chat with us on WhatsApp">
        <img src="https://nerdzfactory.co/wp-content/uploads/2024/12/icons8-whatsapp-240.png" alt="WhatsApp" width="28"
          height="28">
      </a>
    </div>
  </div>
  <div class="navbar" role="navigation">
    <div class="logo">
      <a href="index.html">
        <img src="https://nerdzfactory.co/wp-content/uploads/2024/12/NF-LOGO-mixed.png" alt="NerdzFactory Logo"
          width="180" height="45">
      </a>
    </div>
    <button class="navbar-toggle" id="navbar-toggle" aria-label="Toggle navigation">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>
    <div class="navbar-menu" id="navbar-menu">
      <nav>
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="services.html">Services</a>
        <a href="news.html">News</a>
        <a href="projects.html" class="active">Projects</a>
        <a href="blog.html">Blog</a>
        <a href="techtalk.html">TechTalk Series</a>
        <a href="contact.html">Contact</a>
        <a href="privacy-policy.html">Privacy Policy</a>
      </nav>
    </div>
  </div>

  <!-- Projects Hero Section -->
  <section class="services-hero">
    <div class="services-hero-bg"></div>
    <div class="services-hero-content">
      <h1>Our Projects</h1>
      <p>Discover our impactful initiatives and transformative work</p>
    </div>
  </section>

  <!-- Projects Content Section -->
  <section class="projects-main-section">
    <div class="container">
      <div id="projects-loading" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading projects...</p>
      </div>
      <div id="projects-content" class="projects-grid" style="display: none;">
        <!-- Projects will be loaded here dynamically -->
      </div>
      <div id="projects-error" class="error-message" style="display: none;">
        <p>Unable to load projects at the moment. Please visit our <a href="https://nerdzfactory.co/projects/" target="_blank">WordPress site</a> for the latest updates.</p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-about">
        <img src="https://nerdzfactory.co/wp-content/uploads/2024/12/NF-LOGO-mixed.png" alt="NerdzFactory Logo" class="footer-logo">
        <p class="footer-description">NerdzFactory is a social innovation and human capital development company that leverages technology to transform lives, businesses and society.</p>
        <div class="footer-socials">
          <a href="https://www.facebook.com/profile.php?id=100086124071307" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
          <a href="https://twitter.com/NerdzFactory_co" target="_blank" aria-label="X (formerly Twitter)"><i class="fab fa-x-twitter"></i></a>
          <a href="https://www.linkedin.com/company/nerdzfactory-company/" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
          <a href="https://www.instagram.com/nerdzfactory_co" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
      <div class="footer-links">
        <h3>Company</h3>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="news.html">News</a></li>
          <li><a href="projects.html">Projects</a></li>
          <li><a href="blog.html">Blog</a></li>
          <li><a href="techtalk.html">TechTalk Series</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="privacy-policy.html">Privacy Policy</a></li>
        </ul>
      </div>
      <div class="footer-contact">
        <h3>Get In Touch</h3>
        <ul>
          <li><i class="fas fa-map-marker-alt footer-pin"></i><strong>Nigeria</strong> – 2, Insha Allah close, Off Ramat Crescent, Ogudu GRA, Ojota, Lagos.</li>
          <li><i class="fas fa-map-marker-alt footer-pin"></i><strong>Canada</strong> – 47 Big Blue Stem Rd, Winnipeg MB R2G 4L9.</li>
          <li><i class="fas fa-map-marker-alt footer-pin"></i><strong>USA</strong> – 7120 S. Wabash Avenue, Chicago, Illinois 60619.</li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Copyright © 2025 NerdzFactory Company | Powered by NerdzFactory Company</p>
    </div>
  </footer>

  <script>
    // WordPress REST API Integration
    document.addEventListener('DOMContentLoaded', function() {
      const projectsContainer = document.getElementById('projects-content');
      const loadingSpinner = document.getElementById('projects-loading');
      const errorMessage = document.getElementById('projects-error');

      // WordPress REST API endpoint for projects
      const apiUrl = 'https://nerdzfactory.co/wp-json/wp/v2/posts?per_page=50&_embed&orderby=date&order=desc';

      // Default fallback image
      const fallbackImage = 'https://nerdzfactory.co/wp-content/uploads/2024/12/NF-LOGO-mixed.png';

      async function loadProjects() {
        try {
          console.log('Fetching all articles to find projects...');
          
          const response = await fetch(apiUrl, {
            method: 'GET',
            headers: {
              'Accept': 'application/json',
              'Content-Type': 'application/json'
            },
            timeout: 10000 // 10 second timeout
          });
          
          if (!response.ok) {
            const errorText = await response.text();
            console.error('HTTP Error:', response.status, response.statusText, errorText);
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const allProjects = await response.json();
          console.log('Successfully fetched', allProjects.length, 'total articles');
          
          if (!Array.isArray(allProjects)) {
            throw new Error('Invalid response format: expected array of projects');
          }
          
          // Filter projects by looking for Projects category
          const projects = allProjects.filter(project => {
            // Check if it's categorized as Projects
            const isProjectsCategory = project._embedded?.['wp:term']?.some(termGroup => 
              termGroup.some(term => 
                term.taxonomy === 'category' && 
                (term.name === 'Projects' || term.slug === 'projects')
              )
            );
            
            return isProjectsCategory;
          });
          
          console.log('Found', projects.length, 'projects in Projects category');
          
          if (projects.length === 0) {
            throw new Error('No projects found in the Projects category. Please check if projects are properly categorized.');
          }

          displayProjects(projects);
          loadingSpinner.style.display = 'none';
          projectsContainer.style.display = 'grid';
          
        } catch (error) {
          console.error('Error loading projects:', error);
          console.error('Error details:', {
            message: error.message,
            stack: error.stack,
            url: apiUrl
          });
          
          loadingSpinner.style.display = 'none';
          showError(error.message);
        }
      }

      function showError(message) {
        const errorContainer = document.getElementById('projects-error');
        errorContainer.innerHTML = `
          <div class="error-content">
            <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: #ff6b6b; margin-bottom: 1rem;"></i>
            <h3>Unable to Load Projects</h3>
            <p>${message}</p>
            <p>This might be due to:</p>
            <ul style="text-align: left; max-width: 400px; margin: 1rem auto;">
              <li>Network connectivity issues</li>
              <li>WordPress site temporarily unavailable</li>
              <li>No projects in the Projects category</li>
            </ul>
            <div class="error-actions">
              <button onclick="retryLoadProjects()" class="retry-button">
                <i class="fas fa-redo"></i> Try Again
              </button>
              <a href="https://nerdzfactory.co/projects/" target="_blank" class="wordpress-link">
                <i class="fas fa-external-link-alt"></i> Visit WordPress Site
              </a>
            </div>
          </div>
        `;
        errorContainer.style.display = 'block';
      }

      function displayProjects(projects) {
        try {
          projectsContainer.innerHTML = projects.map((project, index) => {
            // Safely extract project data with fallbacks
            const title = project.title?.rendered || 'Untitled Project';
            const excerpt = project.excerpt?.rendered || project.content?.rendered || 'No excerpt available';
            const cleanExcerpt = excerpt.replace(/<[^>]*>/g, '').substring(0, 150) + '...';
            const link = project.link || '#';
            const date = project.date ? new Date(project.date).toLocaleDateString() : 'No date';
            
            // Handle featured image with fallback
            let featuredImage = fallbackImage;
            try {
              if (project._embedded?.['wp:featuredmedia']?.[0]?.source_url) {
                featuredImage = project._embedded['wp:featuredmedia'][0].source_url;
              }
            } catch (imgError) {
              console.warn('Error processing featured image for project:', index, imgError);
            }
            
            return `
              <div class="project-card">
                <div class="project-image">
                  <img src="${featuredImage}" 
                       alt="${title}" 
                       onerror="this.src='${fallbackImage}'; this.onerror=null;"
                       loading="lazy">
                </div>
                <div class="project-content">
                  <h3>${title}</h3>
                  <p>${cleanExcerpt}</p>
                  <div class="project-meta">
                    <span class="project-date">${date}</span>
                  </div>
                  <a href="${link}" target="_blank" class="project-link">Read More</a>
                </div>
              </div>
            `;
          }).join('');
          
          console.log('Successfully displayed', projects.length, 'projects');
          
        } catch (displayError) {
          console.error('Error displaying projects:', displayError);
          showError('Error displaying projects. Please try again.');
        }
      }

      // Global retry function
      window.retryLoadProjects = function() {
        console.log('Retrying to load projects...');
        const errorContainer = document.getElementById('projects-error');
        const loadingSpinner = document.getElementById('projects-loading');
        
        errorContainer.style.display = 'none';
        loadingSpinner.style.display = 'flex';
        
        // Add a small delay before retrying
        setTimeout(() => {
          loadProjects();
        }, 500);
      };

      // Load projects when page loads
      loadProjects();
    });

    // Mobile menu toggle
    document.getElementById('navbar-toggle').addEventListener('click', function() {
      this.classList.toggle('active');
      document.getElementById('navbar-menu').classList.toggle('active');
    });
  </script>
</body>
</html>

